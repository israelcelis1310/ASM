;	Israel Celis Campagnoli
;	twitter @israelcelis1310
;	https://ve.linkedin.com/in/israelceliscampagnoli
;	Practicas en Assembler Digitales III
;	Universidad Nacional Experimental "Antonio Jóse de Sucre"
;	Vicerectorado "Luis Caballero Mejías"	
		.Model 	Small
		.Stack 	100H
		.data
MENU	DB '1. Introducir nuevo registro',0AH,0AH,0DH
		DB '2. Ver listado',0AH,0AH,0DH
		DB '3. Salir.$'
NR		DB 05H DUP(20H)
		DB 'Codigo: ',0AH,0AH,0DH
		DB 05H DUP(20H)
		DB 'Nnombre: ',0AH,0AH,0DH
		DB 05H DUP(20H)
		DB 'Sexo:$'
BUFFER	DB ?
CANT    DB ?
CONT	DW ?
DEF 	DB 2000H DUP(?)
NP      DB 15
		.code
		MOV AX,SEG MENU ;.ICC
		MOV DS,AX
		MOV SI,OFFSET MENU
INICIO:		MOV DX,0000H
		CALL CURSOR
		CALL BLK
		MOV DX,0000H ;VER EXAMEN
		CALL CURSOR
		MOV DX,OFFSET MENU
		CALL IMPRIMIR
		MOV DX,2000H
		CALL CURSOR
		CALL ESPERA
L0:		CMP AL,31H
		JE NREG
		CMP AL,32H
		JE FIN
		CMP AL,33H
		JE FIN
		JMP L0
FIN:		JMP SALIR
NREG:	MOV DX,0000H;SELECCIONAMOS PAGINA
		CALL CURSOR
		CALL BLK
		MOV DX,0000H
		CALL CURSOR
		MOV DX,OFFSET NR
		CALL IMPRIMIR
		MOV DX,000DH;POSICION DEL CURSOR
		CALL CURSOR	;DONDE COMENZAMOS A ESCRIBIR
		MOV BUFFER,08H
		MOV DX,OFFSET BUFFER
		CALL TECLADO
		MOV DI,OFFSET BUFFER
		MOV CONT,07H
		CALL MUEVE
		MOV DX,020DH;AQUI VA NOMBRE
		CALL CURSOR
		MOV BUFFER,41
		MOV DX,OFFSET BUFFER
		CALL TECLADO
		CALL VERIF
		MOV DI,OFFSET BUFFER
		MOV CONT,40
		CALL MUEVE
		MOV DX,040BH;AQUI VA SEXO
		CALL CURSOR
		MOV BUFFER,2
		MOV DX,OFFSET BUFFER
L2:		CALL TECLADO
		MOV BX,OFFSET BUFFER
		MOV AL,DS:[BX]
		CMP AL,4DH
		JE L1
		CMP AL,46H
		JE L1
		JMP L2
L1:		MOV CONT,1
		MOV DI,OFFSET BUFFER
		CALL MUEVE
		DEC NP
		CMP NP,0
		JE SALIR
		JMP INICIO
SALIR:	MOV AX,4C00H
		INT 21H
CURSOR: MOV AH,02H
		MOV BH,00H
		INT 10H
		RETN
BLK: 	MOV AH,09H
		MOV AL,20H
		MOV BH,00H
		MOV BL,07H
		MOV CX,2000
		INT 10H
		RETN
IMPRIMIR: MOV AH,09H
		INT 21H
		RETN
ESPERA:	MOV AH,00H
		INT 16H
		RETN
MUEVE:	MOV CX,CONT
l4:		MOV AL,DS:[DI]
		MOV DS:[SI],AL
		INC DI
		INC SI
		LOOP l4
		RETN
VERIF:	MOV CH,00H
		MOV CL,CANT
		SUB CX,41
		MOV BX,OFFSET BUFFER
R2:		CMP BX,0DH
		JE R1
		INC BX
		JMP R2
		MOV AX,0020H
R1:		MOV [BX],AX
		INC BX
		LOOP R1
		RETN
TECLADO:	MOV AH,0AH
		INT 21H
		RETN
		END