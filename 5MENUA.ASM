;	Israel Celis Campagnoli
;	twitter @israelcelis1310
;	https://ve.linkedin.com/in/israelceliscampagnoli
;	Practicas en Assembler Digitales III
;	Universidad Nacional Experimental "Antonio Jóse de Sucre"
;	Vicerectorado "Luis Caballero Mejías"
		
       .MODEL SMALL                 
       .STACK 100H
	.DATA

	PROM DB 00H
	PAG DB 00H
	FILA DB 00H
	COLUMNA DB 00H
	PR DB "		1.- Horizontal",0AH,0AH,0AH,0DH
	   DB "		2.- Vertical",0AH,0AH,0AH,0DH
	   DB "		3.- Cuadrilatero",0AH,0AH,0AH,0DH
	   DB "	        4.- Diagonal",0AH,0AH,0AH,0DH
	   DB "		5.- Triangulo",0AH,0AH,0AH,0DH
	   DB "		6.- Salir$",0DH
	ET1 DB "	Tipo:",0AH,0AH,0AH,0DH
	    DB "	P1F:",0AH,0AH,0AH,0DH
	    DB "	P2F:",0AH,0AH,0AH,0DH
	    DB "	P1C:",0AH,0AH,0AH,0DH
	    DB "	P2C:",0AH,0AH,0AH,0DH
	FM2 DB "$",0DH
	    DB "	P3F:",0AH,0AH,0AH,0DH
	    DB "	P3C:$"

	CADENA LABEL BYTE
	MAX DB 04H
	NREAL DB 00H
	BUFFER DB 04H
	
	TIPO DB 00H
	P1F DB 03 DUP(0)
	P1C DB 03 DUP(0)
	P2F DB 03 DUP(0)
	P2C DB 03 DUP(0)
	P3F DB 03 DUP(0)
	P3C DB 03 DUP(0)
	FORMATO1 DB 0DH DUP(0)
	FORMATO2 DB 13H DUP(0)
	
	
	.CODE
	MOV AX,SEG PROM
	MOV DS,AX
	MOV ES,AX
	
PG0:	CALL BORPA
	CALL PANT
	MOV FILA,04H
	MOV COLUMNA,00H
	CALL CURSOR
	MOV DX,OFFSET PR
	CALL IMPRIME

	
	MOV PAG,00H
	CALL PANT

L1:	CALL TECLA
	CMP AL,"1"
	JE S1
	CMP AL,"2"
	JE S2           
	CMP AL,"3"
	JE S3
	CMP AL,"4"
	JE S4
	CMP AL,"5"
	JE S5
	CMP AL,"6"
	JMP FINAL

S1:	MOV AL,"H"
	JMP PG
S2:	MOV AL,"V"
	JMP PG
S3:	MOV AL,"C"
	JMP PG
S4:	MOV AL,"D"
	JMP PG
S5:	MOV AL,"T"
	JMP PT

PT:	MOV FM2,00H
PG:	MOV PAG,01H
	PUSH AX
	CALL PANT
	MOV FILA,02H
	MOV COLUMNA,00H
	CALL CURSOR
	MOV DX,OFFSET ET1
	CALL IMPRIME
	MOV COLUMNA,13
	CALL CURSOR
	POP AX       
	MOV AH,09H
	MOV BL,07H
	MOV CX,01H
	INT 10H
	INC FILA
	INC FILA
	INC FILA
	CALL CURSOR
	MOV DX,OFFSET CADENA
	MOV DI,OFFSET FORMATO1
	INC DI
VUELVE1:CALL EDITA 
	CALL GUARDA
	JMP FINAL	
	
PG1:	MOV PAG,01H
	CALL PANT
	CALL TECLA
	CMP AL,"1"
	JE SALT2
	CMP AL,"2"
       	JE SALT3
	CMP AL,"3"
	JMP PGA

SALT1: 	JMP PGA; MLT
SALT2:	JMP PGA;SUMA1
SALT3:	JMP PGA;SUMA2                  
SALT4:	JMP PGA;CUAD1
SALT5:	JMP PGA;CUAD2
    
PGA:	MOV PAG,00H
	CALL PANT 
	JMP L1

PG12:	MOV PAG,01H
	CALL PANT                     
	CALL TECLA
	CMP AL,"1"
	JE SALT4
	CMP AL,"2"
       	JE SALT5
	CMP AL,"3"
	JMP PGA

VUELVE:	ADD DI,03
	SUB DI,NREAL
	JMP VUELVE1

		    ;********INTERRUPCIONES*********
CURSOR:	MOV AH,02H
	MOV BH,PAG
	MOV DH,FILA
	MOV DL,COLUMNA 
	INT 10H 
   	RET

IMPRIME: MOV AH,09H
	INT 21H
	RET

EDITA:	MOV AH,0AH
	INT 21H
	RET

PANT:	MOV AH,05H
	MOV AL,PAG
	INT 10H
	RET

TECLA:	MOV AH,00H
	INT 16H
	RET

BORPA:	MOV AH,00H
	MOV AL,03H
	INT 10H
	RET                     
	
GUARDA:	MOV SI,OFFSET BUFFER
R0:	MOV AL,DS:[SI]
	MOV ES:[DI],AL
	CALL REVISA
	INC SI
	INC DI
	DEC NREAL
	JNZ R0
	RET

REVISA:	CMP AL,30H
	JAE R1
	JMP VUELVE
R1:	CMP AL,39H
	JBE R2
	JMP VUELVE
R2:	AND AL,0FH
	JMP RF
	CMP AL,41H
	JAE R3
	JMP VUELVE
R3:	CMP AL,46H
	JBE R4
	JMP VUELVE
R4:	SUB AL,37H

RF:	RET


ERROR:	MOV AX,4C01H
	JMP FINAL1

FINAL:	MOV AX,4C00H

FINAL1:	INT 21H
	END
	
						     
