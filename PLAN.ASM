;	Israel Celis Campagnoli
;	twitter @israelcelis1310
;	https://ve.linkedin.com/in/israelceliscampagnoli
;	Practicas en Assembler Digitales III
;	Universidad Nacional Experimental "Antonio Jóse de Sucre"
;	Vicerectorado "Luis Caballero Mejías"	
		.Model Small
		.Stack 100h
		.Data
PLANILLA DB 05 DUP(20H)
		DB "Cedula: ",0AH,0AH,0DH
		DB 05 DUP(20H)
		DB "Nombre: ",0AH,0AH,0DH
		DB 05 DUP(20H)
		DB "Sexo:$"
BUFFER  DB ?
CANT	DB ?
TEXTO	DB 41 DUP(?)
TEMP	DB 51 DUP(?)
TABLA	DB 2000H DUP(?)
SW		DB ?
BORRAR	DB 50 DUP(20H),"$"
		.code
		MOV AX,SEG PLANILLA ;.ICC
		MOV DS,AX
		MOV DI,OFFSET TABLA
INICIO:	MOV DX,0000H
		CALL CURSOR
		CALL BLK
		MOV DX,0B00H
		CALL CURSOR
		MOV DX,OFFSET PLANILLA
		CALL IMPRIMIR
L0:		MOV DX,0B0EH
		CALL CURSOR
		MOV SI,OFFSET TEMP
		MOV BUFFER,0BH
		MOV DX,OFFSET BUFFER
		CALL TECLADO
		CALL VERIF
		CMP CANT,00H
		JNE LIMPIA
		CMP CANT,0AH
		JE MUEVE
		MOV CH,00H
		MOV CL,0AH
		SUB CL,CANT
		CALL MUEVE_1
MUEVE:	MOV BX,OFFSET TEXTO
		MOV CH,00H
		MOV CL,CANT
		CALL MUEVE_2
		JMP L1
LIMPIA:	MOV DX,0B0EH
		CALL CURSOR
		MOV DX,OFFSET BORRAR
		CALL IMPRIMIR
		JMP L0
L1:		MOV DX,0D0EH
		CALL CURSOR
		MOV BUFFER,41
		MOV DX,BUFFER
		CALL TECLADO
		MOV BX,OFFSET TEXTO
		MOV CH,00H
		MOV CL,CANT
		CALL MUEVE_2
		CMP CANT,40
		JE L2
		MOV CH,00H
		MOV CL,40
		SUB CL,CANT
		CALL MUEVE_1
L2:		MOV DX,0F0BH
		CALL CURSOR
		MOV BUFFER,02H
		MOV DX,BUFFER
		CALL TECLADO
		CMP TEXTO,"M"
		JE PASA
		CMP TEXTO,"F"
		JE PASA
		MOV DX,0F0BH
		CALL CURSOR
		MOV DX,OFFSET BORRAR
		CALL IMPRIMIR
		JMP L2
PASA: 	MOV AL,TEXTO
		MOV DS:[SI],AL
		MOV CX,51
		MOV SI,OFFSET TEMP
P1:		MOV AL,DS:[SI]
		INC DI
		INC SI
		LOOP P1
		MOV AH,00H
		INT 16H
		CMP AL,ODH
CURSOR: MOV AH,02H
		MOV BH,06H
		INT 10H
		RETN
BLK: 	MOV AH,09H
		MOV AL,20H
		MOV BH,PAG
		MOV BL,ATRI
		MOV CX,2000
		INT 10H
		RETN
IMPRIMIR: MOV AH,09H
		INT 21H
		RETN
TECLADO: MOV AH,0AH
		INT 21H
		RETN
VERIF: 	MOV SW,00H
		MOV BX,OFFSET TEXTO
		MOV CH,00H
		MOV CL,CANT
V1:		MOV AL,DS:[BX]
		CMP AL,"0"
		JB SALIDA1
		CMP AL,"9"
		JA SALIDA1
		INC BX
		LOOP V1
		JMP SALIDA
SALIDA1:INC SW
SALIDA:	RETN
MUEVE_1:MOV DS:[SI],20H
		INC SI
		LOOP MUEVE_1
		RETN
MUEVE_2:MOV AL,DS:[BX]
		MOV DS:[SI],AL
		INC BX
		INC SI
		LOOP MUEVE_2
		RETN
		END